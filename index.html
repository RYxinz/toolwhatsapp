<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<title>WEB TOOL VVIP</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
:root{
  --bg:#0b0014; --neon:#ff2f92; --soft:#ff86c8; --btn:#ff2f92;
}
*{box-sizing:border-box}
body{margin:0;font-family:Arial,sans-serif;color:#fff;background:var(--bg);overflow:hidden;transition:background 0.5s;}
.box{max-width:420px;margin:70px auto;padding:18px;background:rgba(18,0,24,0.9);border-radius:14px;box-shadow:0 0 28px var(--neon);transition:background 0.5s;}
h1,h2{margin:.2em 0;text-align:center;color:var(--soft)}
input,select,button{width:100%;padding:12px;margin:6px 0;border:0;border-radius:10px;transition:all 0.3s;}
input,select{background:rgba(30,0,43,0.9);color:#fff;}
button{background:var(--btn);color:#fff;font-weight:700;cursor:pointer;}
button[disabled]{opacity:.45;cursor:not-allowed;}
.small{font-size:12px;color:#ffb3df;text-align:center;}
.hidden{display:none;}
hr{border:0;border-top:1px solid #ff4fa0;margin:10px 0;}
.menu button{margin-top:8px;}
</style>
</head>
<body>

<audio id="notifSound" src="https://www.soundjay.com/button/beep-07.wav"></audio>

<!-- LOGIN / REGISTER -->
<div class="box" id="loginBox">
  <h1>WEB TOOL VVIP</h1>
  <input id="u" placeholder="Username" />
  <input id="p" type="password" placeholder="Password" />
  <button onclick="login()">LOGIN</button>
  <button onclick="register()">REGISTER</button>
  <div id="info" class="small"></div>
</div>

<!-- DASHBOARD -->
<div class="box hidden" id="dash">
  <h2 id="roleTxt"></h2>
  <div id="clock" class="small"></div>
  <hr/>
  <label>Pilih Theme:</label>
  <select id="themeSelect" onchange="changeTheme()">
    <option value="pink">Pink Neon</option>
    <option value="blue">Blue Neon</option>
    <option value="green">Green Neon</option>
    <option value="purple">Purple Neon</option>
  </select>
  <div class="menu">
    <button id="banBtn" onclick="openBan()">BAN / UNBAN</button>
    <button onclick="buyPremium()">BELI PREMIUM</button>
    <button id="ownerBtn" onclick="openOwner()">PANEL OWNER</button>
    <button onclick="logout()">LOGOUT</button>
  </div>
</div>

<!-- BAN BOX -->
<div class="box hidden" id="banBox">
  <h2>BAN / UNBAN</h2>
  <select id="type"></select>
  <input id="target" placeholder="Nomor target (contoh: 628xxxxxxxx)" />
  <button onclick="sendReport()">KIRIM</button>
  <button onclick="back()">KEMBALI</button>
</div>

<!-- OWNER PANEL -->
<div class="box hidden" id="ownerBox">
  <h2>PANEL OWNER</h2>
  <input id="newUser" placeholder="Username Premium" />
  <input id="newPass" placeholder="Password" />
  <input id="days" type="number" placeholder="Masa aktif (hari)" />
  <button onclick="addPremium()">TAMBAH PREMIUM</button>
  <button onclick="hardReset()">RESET ALL (DARURAT)</button>
  <button onclick="back()">KEMBALI</button>
  <div id="ownerInfo" class="small"></div>
</div>

<script>
const $ = id => document.getElementById(id);
const now = () => Date.now();

// USERS INIT
let users;
try{ users = JSON.parse(localStorage.getItem("users")); if(!users || typeof users!=="object") throw 0; }catch{ users = {}; }
const BASE_USERS = { brama:{p:"brama123", r:"OWNER"}, admin:{p:"admin123", r:"ADMIN"} };
for(const k in BASE_USERS) if(!users[k]) users[k]=BASE_USERS[k];
localStorage.setItem("users", JSON.stringify(users));

// SESSION
let current = null;

// LOGIN
function login(){
  const u = $("u").value.trim(), p = $("p").value.trim(), info=$("info");
  if(!users[u]){ info.innerText="Username tidak ditemukan"; return; }
  if(users[u].p!==p){ info.innerText="Password salah"; return; }

  if(users[u].r==="PREMIUM"){
    if(!users[u].exp || now()>users[u].exp){ users[u].r="FREE"; delete users[u].exp; localStorage.setItem("users",JSON.stringify(users)); }
  }

  current = u; sessionStorage.setItem("login", u); openDash();
}

// REGISTER
function register(){
  const u = $("u").value.trim(), p = $("p").value.trim(), info=$("info");
  if(!u || !p){ info.innerText="Isi username & password"; return; }
  if(users[u]){ info.innerText="Username sudah ada"; return; }
  users[u]={p:p, r:"FREE"}; localStorage.setItem("users", JSON.stringify(users));
  info.innerText="Registrasi berhasil, silahkan login";
}

// DASHBOARD
function openDash(){
  $("loginBox").classList.add("hidden"); $("dash").classList.remove("hidden");
  const r = users[current].r; $("roleTxt").innerText = r + " DASHBOARD";
  $("ownerBtn").style.display = r==="OWNER"?"block":"none";

  const typeSelect = $("type");
  if(r==="FREE"){ typeSelect.innerHTML='<option value="unban">UNBAN</option>'; }
  else{ typeSelect.innerHTML='<option value="ban">BAN</option><option value="unban">UNBAN</option>'; }
}

// AUTO LOGIN
const saved = sessionStorage.getItem("login");
if(saved && users[saved]){ current = saved; openDash(); }

// CLOCK
setInterval(()=> $("clock").innerText = new Date().toLocaleString("id-ID"), 1000);

// THEME
function changeTheme(){
  const val = $("themeSelect").value;
  if(val==="pink"){ document.documentElement.style.setProperty('--bg','#0b0014'); document.documentElement.style.setProperty('--btn','#ff2f92'); }
  if(val==="blue"){ document.documentElement.style.setProperty('--bg','#00142b'); document.documentElement.style.setProperty('--btn','#2fbfff'); }
  if(val==="green"){ document.documentElement.style.setProperty('--bg','#002b14'); document.documentElement.style.setProperty('--btn','#2fff6b'); }
  if(val==="purple"){ document.documentElement.style.setProperty('--bg','#14002b'); document.documentElement.style.setProperty('--btn','#b02fff'); }
}

// BAN / UNBAN
function openBan(){ $("dash").classList.add("hidden"); $("banBox").classList.remove("hidden"); }
function sendReport(){
  const r = users[current].r;
  const t = $("target").value.trim();
  const ty = $("type").value;
  if(!t){ alert("Masukkan nomor target"); return; }
  if(r==="FREE" && ty==="ban"){ alert("User Free hanya bisa UNBAN"); return; }

  let text="";
  if(ty==="ban"){ 
    text = `Halo, saya Brama ingin meminta developer untuk memblokir nomor WhatsApp ${t} karena mengirim konten spam dan pelanggaran hak cipta.`; 
  } else { 
    text = `Halo developer, saya ingin melaporkan pencabutan blokir nomor WhatsApp saya ${t}. Saya perlu menghubungi keluarga karena bekerja di luar kota. Terima kasih.`; 
  }

  // Play notification sound
  const sound = $("notifSound"); sound.play();

  // Open email client
  window.location.href = `mailto:support@support.whatsapp.com?subject=Report ${ty.toUpperCase()} ${t}&body=${encodeURIComponent(text)}`;
}

// PREMIUM
function buyPremium(){ location.href = "https://wa.me/6283152406327?text=" + encodeURIComponent("Halo, saya ingin beli PREMIUM WEB TOOL VVIP"); }

// OWNER PANEL
function openOwner(){ $("dash").classList.add("hidden"); $("ownerBox").classList.remove("hidden"); list(); }
function addPremium(){
  const u = $("newUser").value.trim(); const d = Number($("days").value||0);
  if(!u){ $("ownerInfo").innerText="Username kosong"; return; }
  users[u]={p:$("newPass").value||"123456", r:"PREMIUM", exp: now()+d*86400000};
  localStorage.setItem("users",JSON.stringify(users));
  $("ownerInfo").innerText="Premium ditambahkan"; list();
}
function hardReset(){ localStorage.clear(); sessionStorage.clear(); location.reload(); }

// NAV
function back(){ $("banBox").classList.add("hidden"); $("ownerBox").classList.add("hidden"); $("dash").classList.remove("hidden"); }
function logout(){ sessionStorage.clear(); location.reload(); }
function list(){ $("ownerInfo").innerHTML="<b>AKUN:</b><br>"+Object.keys(users).map(u=>u+" - "+users[u].r).join("<br>"); }

</script>

</body>
  </html>
